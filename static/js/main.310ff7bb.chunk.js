(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{131:function(e,a,t){e.exports=t(183)},159:function(e,a,t){},183:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),o=t.n(c),l=t(9),i=t(114),m=t(222),s=t(19),u=t.n(s),d=t(106),p=t.n(d),E=t(12),f=t(17),b=(t(159),t(4)),g=t(219),h=t(220),y=t(213),O=t(208),j=t(221),S=function(){return function(e){localStorage.removeItem("FBIdToken"),delete u.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},v=function(){return function(e){e({type:"LOADING_USER"}),u.a.get("/user").then((function(a){e({type:"SET_USER",payload:a.data})})).catch((function(e){return console.log(e)}))}},N=function(e){var a="Bearer ".concat(e);localStorage.setItem("FBIdToken",a),u.a.defaults.headers.common.Authorization=a},C=t(238),I=t(207),A=function(e){var a=e.children,t=e.onClick,n=e.title,c=e.btnClasses,o=e.tipClasses;return r.a.createElement(C.a,{title:n,className:o,placement:"top"},r.a.createElement(I.a,{onClick:t,className:c},a))},x=t(14),T=t(239),R=t(210),_=t(211),w=t(236),k=t(212),D=t(214),U=t(209),L=t(44),P=t(111),F=t(25),M={loading:!1,screams:[],scream:{},userData:{}},W={loading:!1,errors:{}},B={authenticated:!1,loading:!1,credentials:{},likes:[],notifications:[]},G=[P.a],Y=Object(L.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOADING_DATA":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"SET_SCRAMS":return Object(b.a)(Object(b.a)({},e),{},{screams:a.payload,loading:!1});case"SET_SCREAM":return Object(b.a)(Object(b.a)({},e),{},{scream:a.payload,loading:!1});case"LIKE_SCREAM":case"UNLIKE_SCREAM":var t=e.screams.map((function(e){return e.screamId===a.payload.screamId?Object(b.a)(Object(b.a)({},e),{},{likeCount:a.payload.likeCount}):e})),n=e.userData.screams.map((function(e){return e.screamId===a.payload.screamId?Object(b.a)(Object(b.a)({},e),{},{likeCount:a.payload.likeCount}):e}));return Object(b.a)(Object(b.a)({},e),{},{screams:t,scream:Object(b.a)(Object(b.a)({},e.scream),{},{likeCount:a.payload.likeCount}),userData:Object(b.a)(Object(b.a)({},e.userData),{},{screams:n})});case"DELETE_SCREAM":return Object(b.a)(Object(b.a)({},e),{},{screams:e.screams.filter((function(e){return e.screamId!==a.payload}))});case"POST_SCREAM":return Object(b.a)(Object(b.a)({},e),{},{screams:[a.payload].concat(Object(F.a)(e.screams))});case"SUBMIT_COMMENT":var r=e.screams.map((function(e){return e.screamId===a.payload.screamId?Object(b.a)(Object(b.a)({},e),{},{commentCount:e.commentCount+1}):e})),c=e.userData.screams.map((function(e){return e.screamId===a.payload.screamId?Object(b.a)(Object(b.a)({},e),{},{commentCount:e.commentCount+1}):e}));return Object(b.a)(Object(b.a)({},e),{},{screams:r,scream:Object(b.a)(Object(b.a)({},e.scream),{},{commentCount:e.scream.commentCount+1,comments:[a.payload].concat(Object(F.a)(e.scream.comments))}),userData:Object(b.a)(Object(b.a)({},e.userData),{},{screams:c})});case"SET_USER_DATA":return Object(b.a)(Object(b.a)({},e),{},{userData:a.payload,loading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(b.a)(Object(b.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return Object(b.a)(Object(b.a)({},e),{},{authenticated:!1});case"SET_USER":return Object(b.a)({authenticated:!0,loading:!1},a.payload);case"LIKE_SCREAM":return Object(b.a)(Object(b.a)({},e),{},{likes:[].concat(Object(F.a)(e.likes),[{userHandle:e.credentials.handle,screamId:a.payload.screamId}])});case"UNLIKE_SCREAM":return Object(b.a)(Object(b.a)({},e),{},{likes:e.likes.filter((function(e){return e.screamId!==a.payload.screamId}))});case"LOADING_USER":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"MARK_NOTIFICATION_READ":return Object(b.a)(Object(b.a)({},e),{},{notifications:e.notifications.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{read:!0})}))});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,errors:a.payload});case"CLEAR_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,errors:{}});case"LOADING_UI":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"STOP_LOADING":return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}}}),H=Object(L.e)(Y,{},Object(L.d)(L.a.apply(void 0,G),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),K=Object(O.a)((function(e){return Object(b.a)(Object(b.a)({},e.spread),{},{postScreamBtn:{color:"inherit"},dialogBtns:{margin:"20px"}})})),z=Object(l.b)((function(e){return{UI:e.UI}}),{postNewScream:function(e){return function(a){a({type:"LOADING_UI"}),u.a.post("/screams",e).then((function(e){a({type:"POST_SCREAM",payload:e.data}),a({type:"CLEAR_ERRORS"})})).catch((function(e){a({type:"SET_ERRORS",payload:e.response&&e.response.data})}))}}})((function(e){var a=e.postNewScream,t=e.UI,c=t.loading,o=t.errors,l=K(),i=Object(n.useState)({body:""}),m=Object(x.a)(i,2),s=m[0],u=m[1],d=Object(n.useState)(!1),p=Object(x.a)(d,2),E=p[0],f=p[1],b=function(){f(!1),u({body:""}),H.dispatch({type:"CLEAR_ERRORS"})};return Object(n.useEffect)((function(){s.body&&!c&&b()}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:"Post a Scream",tipClasses:l.postScreamBtn,onClick:function(){f(!0)}},r.a.createElement(U.a,null)),r.a.createElement(T.a,{open:E,onClose:b,fullWidth:!0,maxWidth:"sm"},r.a.createElement(R.a,null,"Post a Scream"),r.a.createElement(_.a,null,r.a.createElement("form",null,r.a.createElement(w.a,{name:"scream",type:"text",id:"scream",label:"Scream",placeholder:"Enter Your Scream",onChange:function(e){u({body:e.target.value})},fullWidth:!0,multiline:!0,error:!(!o||!o.body),helperText:o&&o.body?o.body:""}))),r.a.createElement(k.a,null,r.a.createElement(y.a,{color:"secondary",variant:"contained",className:"".concat(l.button," ").concat(l.dialogBtns),onClick:b},"Cancel"),r.a.createElement(y.a,{color:"primary",variant:"contained",className:"".concat(l.button," ").concat(l.dialogBtns),type:"submit",onClick:function(e){a(s)},disabled:c},c?r.a.createElement(D.a,{className:l.circularProgress}):"Post"))))})),V=t(216),J=t(217),X=t(218),$=t(215),q=t(240),Q=t(118),Z=t(115),ee=t(33),ae=t.n(ee),te=Object(l.b)((function(e){return{notifications:e.user.notifications}}),{markNotificationsRead:function(e){return function(a){u.a.post("/notifications",e).then((function(){a({type:"MARK_NOTIFICATION_READ"})})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.markNotificationsRead,t=e.notifications,c=Object(n.useState)(null),o=Object(x.a)(c,2),l=o[0],i=o[1],m=function(e){i(null)},s=t.filter((function(e){return!e.read})).length,u=t&&t.length>0&&s?r.a.createElement($.a,{badgeContent:s,color:"secondary"},r.a.createElement(V.a,{color:"default"})):r.a.createElement(V.a,{color:"default"}),d=t&&t.length?t.map((function(e){var a="like"===e.type?"liked":"commented",t=e.read?"primary":"secondary",n="like"===e.type?r.a.createElement(J.a,{color:t}):r.a.createElement(X.a,{color:t}),c=ae()(e.createdAt).fromNow();return r.a.createElement(q.a,{onClick:m,component:E.b,to:"/users/".concat(e.recipient,"/scream/").concat(e.screamId)},n,r.a.createElement(Q.a,{variant:"body1",style:{marginLeft:"10px"}},e.sender," ",a," your scream ",c))})):r.a.createElement(q.a,null,"You Have No Notififcations");return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{placement:"top",title:"Notifications"},r.a.createElement(I.a,{"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},u)),r.a.createElement(Z.a,{anchorEl:l,open:Boolean(l),onClose:m,onEntered:function(){var e=t.filter((function(e){return!e.read})).map((function(e){return e.notificationId}));a(e)}},d))})),ne=Object(O.a)((function(e){return Object(b.a)(Object(b.a)({},e.spread),{},{icon:{color:"#fff"},bar:{flexDirection:"row",padding:5,color:"#fff"},img:{width:80}})})),re=Object(l.b)((function(e){return{authenticated:e.user.authenticated}}),{logout:S})((function(e){var a=e.authenticated,t=e.logout,n=ne();return r.a.createElement(g.a,{className:n.bar},r.a.createElement(h.a,{className:"nav-container"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null),r.a.createElement(A,{title:"Home"},r.a.createElement(E.b,{to:"/"},r.a.createElement(j.a,{className:n.icon}))),r.a.createElement(te,null),r.a.createElement(y.a,{component:E.b,to:"/login",onClick:t,className:n.icon},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{color:"inherit",component:E.b,to:"/login"},"Login"),r.a.createElement(y.a,{color:"inherit",component:E.b,to:"/signup"},"Signup"))))})),ce=t(230),oe=t(11),le=t(112),ie=t.n(le),me=t(223),se=ie()((function(e){return Object(b.a)(Object(b.a)({},e.spread),{},{tooltip:{display:"block",margin:"auto"}})})),ue=Object(l.b)((function(e){return{credentials:e.user.credentials}}),{editUserDetails:function(e){return function(a){a({type:"LOADING_USER"}),u.a.post("/user",e).then((function(){a(v())})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.editUserDetails,t=se(),c=Object(n.useState)({bio:"",location:"",website:""}),o=Object(x.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(!1),s=Object(x.a)(m,2),u=s[0],d=s[1],p=function(){d(!1)},E=function(e){e.preventDefault(),a(l)},f=function(e){i(Object(b.a)(Object(b.a)({},l),{},Object(oe.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:"Edit Details",tipClasses:t.tooltip,onClick:function(){d(!0)}},r.a.createElement(me.a,{color:"primary"})),r.a.createElement(T.a,{open:u,onClose:p,fullWidt:!0,maxWidth:"sm"},r.a.createElement(R.a,null,"Edit Your details"),r.a.createElement(_.a,null,r.a.createElement("form",{onSubmit:E},r.a.createElement(w.a,{name:"bio",type:"text",label:"Bio",multiline:!0,row:"3",placeholder:"A short bio about your self",onChange:f,fullWidth:!0}),r.a.createElement(w.a,{name:"location",type:"text",label:"Location",placeholder:"A short bio about your self",onChange:f,fullWidth:!0}),r.a.createElement(w.a,{name:"website",type:"text",label:"Website",placeholder:"A short bio about your self",onChange:f,fullWidth:!0}))),r.a.createElement(k.a,null,r.a.createElement(y.a,{onClick:p,color:"primary"},"Cancel"),r.a.createElement(y.a,{onClick:E,color:"secondary"},"Save"))))})),de=t(117),pe=t(224),Ee=t(225),fe=t(226),be=t(227),ge=t(113),he=t.n(ge),ye=Object(O.a)((function(e){return Object(b.a)({},e.spread)})),Oe=Object(l.b)((function(e){return{user:e.user}}),{uploadImage:function(e){return function(a){a({type:"LOADING_USER"}),u.a.post("/user/image",e).then((function(){a(v())})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.user,t=e.uploadImage,c=a.authenticated,o=a.loading,l=a.credentials,i=l.handle,m=l.createdAt,s=l.imageUrl,u=l.bio,d=l.website,p=l.location,f=ye(),b=Object(n.useRef)(),g=r.a.createElement(de.a,{className:f.paper},r.a.createElement("div",{className:f.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{className:"profile-image",src:s,alt:"profile"}),r.a.createElement("input",{type:"file",ref:b,onChange:function(e){var a=e.target.files[0];(new FormData).append("image",a,a.name),t()},hidden:"hidden"}),r.a.createElement(A,{title:"Edit Profile Picture",btnClasses:"button",onClick:function(){b.current.click()}},r.a.createElement(me.a,{color:"primary"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement(pe.a,{component:E.b,to:"/users/".concat(i),color:"primary",variant:"h5"},"@",i),r.a.createElement("hr",null),u&&r.a.createElement(Q.a,{variant:"body2"},u),r.a.createElement("hr",null),p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{color:"primary"}),r.a.createElement("span",null,p),r.a.createElement("hr",null)),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{color:"primary"}),r.a.createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer"}," "," ",d),r.a.createElement("hr",null)),r.a.createElement(be.a,{color:"primary"})," ",r.a.createElement("span",null,"Joined ",he()(m).format("MMM YYYY"))),r.a.createElement(ue,null))),h=r.a.createElement(de.a,{className:f.paper,p:3},r.a.createElement(Q.a,{variant:"body2",align:"center"},"No profile found, Please login"),r.a.createElement("div",{className:f.buttons},r.a.createElement(y.a,{variant:"contained",color:"primary",component:E.b,to:"/login"},"Login"),r.a.createElement(Q.a,{component:"p"},"or"),r.a.createElement(y.a,{variant:"contained",color:"secondary",component:E.b,to:"/signup"},"Signup")));return o?"loading profile...":c?g:h})),je=t(233),Se=t(234),ve=t(235),Ne=t(2),Ce=t(228),Ie=Object(O.a)({deleteButton:{position:"absolute",left:"90%"}}),Ae=Object(l.b)((function(e){return{}}),{deleteScream:function(e){return function(a){u.a.delete("/scream/".concat(e)).then((function(){a({type:"DELETE_SCREAM",payload:e})})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.screamId,t=Object(Ne.a)(e,["screamId"]),c=Ie(),o=Object(n.useState)(!1),l=Object(x.a)(o,2),i=l[0],m=l[1],s=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:"Delete Scream",onClick:function(){m(!0)},btnClasses:c.deleteButton},r.a.createElement(Ce.a,{color:"primary"})),r.a.createElement(T.a,{open:i,onClose:s,fullWidth:!0,maxWidth:"sm"},r.a.createElement(R.a,null,"Are you sure you want to delete this scream ?"),r.a.createElement(k.a,null,r.a.createElement(y.a,{onClick:s,color:"primary"},"Cancel"),r.a.createElement(y.a,{onClick:function(){t.deleteScream(a),m(!1)}},"Delete"))))})),xe=Object(l.b)((function(e){return{user:e.user}}))((function(e){return e.user.authenticated?r.a.createElement(A,{title:"Comment Scream"},r.a.createElement(X.a,{color:"primary"})):r.a.createElement(A,{title:"Comment Scream"},r.a.createElement(E.b,{to:"/login"},r.a.createElement(X.a,{color:"primary"})))})),Te=t(229),Re=Object(l.b)((function(e){return{user:e.user}}),{likeScream:function(e){return function(a){u.a.get("/scream/".concat(e,"/like")).then((function(e){a({type:"LIKE_SCREAM",payload:e.data})})).catch((function(e){return console.log(e)}))}},unlikeScream:function(e){return function(a){u.a.get("/scream/".concat(e,"/unlike")).then((function(e){a({type:"UNLIKE_SCREAM",payload:e.data})})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.user,t=a.authenticated,n=a.likes,c=e.likeScream,o=e.unlikeScream,l=e.screamId,i=r.a.createElement(A,{title:"like"},r.a.createElement(E.b,{to:"/login"},r.a.createElement(Te.a,{color:"primary"}))),m=r.a.createElement(A,{title:"Undo Like",onClick:function(){return o(l)}},r.a.createElement(J.a,{color:"primary"})),s=r.a.createElement(A,{title:"Like",onClick:function(){return c(l)}},r.a.createElement(Te.a,{color:"primary"}));return t?n&&n.find((function(e){return e.screamId===l}))?m:s:i})),_e=t(231),we=t(232),ke=Object(O.a)((function(e){return{commentBtn:{margin:"10px 0 20px"}}})),De=Object(l.b)((function(e){return{errors:e.UI.errors}}),{submitComment:function(e,a){return function(t){t({type:"LOADING_UI"}),u.a.post("/scream/".concat(e,"/comment"),a).then((function(e){t({type:"SUBMIT_COMMENT",payload:e.data}),t({type:"STOP_LOADING"})})).catch((function(e){t({type:"SET_ERRORS",payload:e.response&&e.response.data})}))}}})((function(e){var a=e.screamId,t=e.errors,c=e.submitComment,o=ke(),l=Object(n.useState)({body:""}),i=Object(x.a)(l,2),m=i[0],s=i[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(a,m)}},r.a.createElement(w.a,{type:"text",name:"comment",label:"Comment Scream",onChange:function(e){s({body:e.target.value})},error:!(!t||!t.comment),helperText:t.comment,fullWidth:!0,multiline:!0}),r.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:o.commentBtn},"Comment"))})),Ue=Object(O.a)((function(e){return Object(b.a)(Object(b.a)({},e.spread),{},{img:{width:"70px",borderRadius:"50%"},commentBody:{textAlign:"left",fontSize:"medium"},visibleSeperator:{width:"100%",borderBottom:"1px solid #eee"}})})),Le=Object(l.b)((function(e){return{loading:e.UI.loading}}))((function(e){var a=e.comments,t=e.screamId,n=e.loading,c=Ue();return!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{screamId:t}),r.a.createElement("ul",{className:c.commentList},a&&a.map((function(e,t){var n=e.body,o=e.createdAt,l=e.userImage,i=e.userHandle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{container:!0},r.a.createElement(ce.a,{item:!0,sm:2,spacing:2},r.a.createElement("img",{src:l,alt:"comment",className:c.img})),r.a.createElement(ce.a,{item:!0,sm:9},r.a.createElement("div",{className:c.commentBody},r.a.createElement(Q.a,{variant:"h6",component:E.b,to:"/users/".concat(i)},"@",i),r.a.createElement(Q.a,{variant:"body1",color:"textSecondary"},ae.a.utc(o).calendar()),r.a.createElement(Q.a,{variant:"body1"},n)))),t!==a.length-1&&r.a.createElement("hr",{className:c.visibleSeperator}))}))))})),Pe=Object(O.a)((function(e){return Object(b.a)(Object(b.a)({},e.spread),{},{expand:{position:"absolute",left:"90%",top:"70%",height:"50px"},dialog:{padding:"1rem",textAlign:"center"},dialogContent:{display:"flex",flexDirection:"column",padding:"1rem"},close:{marginLeft:"auto",marginRight:"1rem",borderRadius:"50%"},imgGrid:{textAlign:"center"},contentGrid:{textAlign:"left"},progressContainer:{width:"100%",height:"100%",textAlign:"center"},img:{width:200,borderRadius:"50%",objectFit:"cover"},likes:{fontSize:"medium",marginLeft:"0.5rem"},invisibleSeperator:{visibility:"hidden"}})})),Fe=Object(l.b)((function(e){return{loading:e.UI.loading,scream:e.data.scream}}),{getScream:function(e){return function(a){a({type:"LOADING_UI"}),u.a.get("/scream/".concat(e)).then((function(e){a({type:"SET_SCREAM",payload:e.data}),a({type:"STOP_LOADING"})})).catch((function(e){return console.log(e)}))}}})((function(e){var a=e.getScream,t=e.scream,c=e.screamId,o=e.loading,l=e.openDialog,i=e.handle,m=t.body,s=t.userImage,u=t.createdAt,d=t.likeCount,p=t.comments,f=t.commentCount,g=Pe(),h=Object(n.useState)(!1),y=Object(x.a)(h,2),O=y[0],j=y[1],S=Object(n.useState)({oldPath:"",newPath:""}),v=Object(x.a)(S,2),N=v[0],C=v[1],I=function(){var e=window.location.pathname,t="/users/".concat(i,"/scream/").concat(c);N.oldPath===t?C(Object(b.a)(Object(b.a)({},N),{},{oldPath:"/users/".concat(i)})):C({oldPath:e,newPath:t}),window.history.pushState(null,null,t),j(!0),a(c)},R=function(){window.history.pushState(null,null,N.oldPath),j(!1)};Object(n.useEffect)((function(){l&&I()}),[]);var w=o?r.a.createElement("div",{className:g.progressContainer},r.a.createElement(D.a,{size:100,thickness:2,color:"primary"})):r.a.createElement(ce.a,{container:!0,spacing:2},r.a.createElement(ce.a,{item:!0,sm:5,className:g.imgGrid},r.a.createElement("img",{src:s,alt:"profile",className:g.img})),r.a.createElement(ce.a,{item:!0,sm:7,className:g.contentGrid},r.a.createElement(Q.a,{component:E.b,color:"primary",variant:"h5",to:"/users/".concat(i)},"@",i),r.a.createElement(Q.a,{variant:"body2",color:"textSecondary"},ae.a.utc(u).calendar()),r.a.createElement("hr",{className:g.invisibleSeperator}),r.a.createElement(Q.a,{variant:"body1"},m),r.a.createElement(Re,{screamId:c}),r.a.createElement("span",null,d," likes"),r.a.createElement(xe,null),r.a.createElement("span",null,f," comments")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{title:"Expand Scream",onClick:I,tipClasses:g.expand},r.a.createElement(_e.a,{color:"primary"})),r.a.createElement(T.a,{className:g.dialog,open:O,onClose:R,fullWidth:!0,maxWidth:"sm"},r.a.createElement(A,{tipClasses:g.close,title:"close",onClick:R},r.a.createElement(we.a,null)),r.a.createElement(_.a,{className:g.dialogContent},w,r.a.createElement(Le,{screamId:c,comments:p}))))})),Me=Object(O.a)({card:{display:"flex",marginBottom:20,position:"relative"},content:{padding:25,objectFit:"cover"},image:{minWidth:200}}),We=Object(l.b)((function(e){return{user:e.user}}))((function(e){var a=e.user,t=a.credentials,n=a.authenticated,c=e.scream,o=e.openDialog,l=c.body,i=c.createdAt,m=c.userImage,s=c.userHandle,u=c.screamId,d=c.likeCount,p=c.commentCount,f=Me(),b=n&&s===t.handle?r.a.createElement(Ae,{screamId:u}):null;return r.a.createElement(je.a,{className:f.card},r.a.createElement(Se.a,{image:m,title:"profile image",className:f.image}),r.a.createElement(ve.a,{className:f.content},r.a.createElement(Q.a,{variant:"h5",color:"primary",component:E.b,to:"/users/".concat(s)},s),b,r.a.createElement(Q.a,{variant:"body2",color:"textSecondary"},ae.a.utc(i).calendar()),r.a.createElement(Q.a,{variant:"body1"},l),r.a.createElement(Re,{screamId:u}),r.a.createElement("span",null,d," likes"),r.a.createElement(xe,null),r.a.createElement("span",null,p," comments")),r.a.createElement(Fe,{screamId:u,handle:s,openDialog:o}))})),Be=Object(l.b)((function(e){return{data:e.data}}),{getScreams:function(){return function(e){e({type:"LOADING_DATA"}),u.a.get("/screams").then((function(a){e({type:"SET_SCRAMS",payload:a.data})})).catch((function(){e({type:"SET_SCRAMS",payload:[]})}))}}})((function(e){var a=e.getScreams,t=e.data,c=t.screams,o=t.loading;return Object(n.useEffect)((function(){a()}),[]),r.a.createElement(ce.a,{container:!0,spacing:2},r.a.createElement(ce.a,{item:!0,lg:8,xs:12},o?"Loading...":c.map((function(e){return r.a.createElement(We,{key:e.screamId,scream:e})}))),r.a.createElement(ce.a,{item:!0,lg:4,xs:12},r.a.createElement(Oe,null)))})),Ge=t(74),Ye=t.n(Ge),He=Object(O.a)((function(e){return Object(b.a)({},e.spread)})),Ke=Object(l.b)((function(e){return{user:e.user,UI:e.UI}}),{loginUser:function(e,a){return function(t){t({type:"LOADING_UI"}),u.a.post("/signin",e).then((function(e){N(e.data.token),t(v()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){t({type:"SET_ERRORS",payload:e.response&&e.response.data})}))}}})((function(e){var a=e.loginUser,t=e.history,c=e.UI,o=c.loading,l=c.errors,i=He(),m=Object(n.useState)({email:"",password:""}),s=Object(x.a)(m,2),u=s[0],d=s[1],p=function(e){d(Object(b.a)(Object(b.a)({},u),{},Object(oe.a)({},e.target.id,e.target.value)))},f=l.email,g=l.password,h=l.general;return r.a.createElement(ce.a,{container:!0,className:i.form},r.a.createElement(ce.a,{item:!0,sm:!0}),r.a.createElement(ce.a,{item:!0,sm:!0},r.a.createElement("img",{src:Ye.a,alt:"thunder",className:i.img}),r.a.createElement(Q.a,{variant:"h5",className:i.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),a(u,t)}},r.a.createElement(w.a,{id:"email",type:"email",name:"email",label:"Email",className:i.textField,onChange:p,helperText:f,error:!!f,fullWidth:!0}),r.a.createElement(w.a,{id:"password",type:"password",name:"password",label:"Password",className:i.textField,onChange:p,helperText:g,error:!!g,fullWidth:!0}),h&&r.a.createElement(Q.a,{variant:"body2",className:i.customError},h),r.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:i.button,disabled:o},o?r.a.createElement(D.a,{className:i.circularProgress}):"Login"),r.a.createElement("small",{className:i.small},"don't have an account? sign up ",r.a.createElement(E.b,{to:"/signup"},"here")))),r.a.createElement(ce.a,{item:!0,sm:!0}))})),ze=Object(O.a)((function(e){return Object(b.a)({},e.spread)})),Ve=Object(l.b)((function(e){return{user:e.user,UI:e.UI}}),{signup:function(e,a){return function(t){t({type:"LOADING_UI"}),u.a.post("/signup",e).then((function(e){N(e.data.token),t(v()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){t({type:"SET_ERRORS",payload:e.response&&e.response.data})}))}}})((function(e){var a=e.signup,t=e.history,c=e.UI,o=c.loading,l=c.errors,i=ze(),m=Object(n.useState)({email:"",password:"",confirmPassword:"",handle:""}),s=Object(x.a)(m,2),u=s[0],d=s[1],p=function(e){d(Object(b.a)(Object(b.a)({},u),{},Object(oe.a)({},e.target.id,e.target.value)))},f=l.general,g=l.email,h=l.password,O=l.confirmPassword,j=l.handle;return r.a.createElement(ce.a,{container:!0,className:i.form},r.a.createElement(ce.a,{item:!0,sm:!0}),r.a.createElement(ce.a,{item:!0,sm:!0},r.a.createElement("img",{src:Ye.a,alt:"thunder",className:i.img}),r.a.createElement(Q.a,{variant:"h5",className:i.pageTitle},"Signup"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),a(u,t)}},r.a.createElement(w.a,{id:"email",type:"email",name:"email",label:"Email",className:i.textField,onChange:p,helperText:g,error:!!g,fullWidth:!0}),r.a.createElement(w.a,{id:"password",type:"password",name:"password",label:"Password",className:i.textField,onChange:p,helperText:h,error:!!h,fullWidth:!0}),r.a.createElement(w.a,{id:"confirmPassword",type:"password",name:"confirmPassword",label:"Confirm Password",className:i.textField,onChange:p,helperText:O,error:!!O,fullWidth:!0}),r.a.createElement(w.a,{id:"handle",type:"text",name:"handle",label:"Handle",className:i.textField,onChange:p,helperText:j,error:!!j,fullWidth:!0}),f&&r.a.createElement(Q.a,{variant:"body2",className:i.customError},f),r.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:i.button,disabled:o},o?r.a.createElement(D.a,{className:i.circularProgress}):"Signup"),r.a.createElement("small",{className:i.small},"Already have an account? login ",r.a.createElement(E.b,{to:"/login"},"here")))),r.a.createElement(ce.a,{item:!0,sm:!0}))})),Je=Object(l.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var a=e.component,t=e.authenticated,n=Object(Ne.a)(e,["component","authenticated"]);return r.a.createElement(f.b,Object.assign({component:function(e){return t?r.a.createElement(f.a,{to:"/"}):r.a.createElement(a,e)}},n))})),Xe=Object(O.a)((function(e){return Object(b.a)({},e.spread)})),$e=Object(l.b)((function(e){var a=e.data.userData.user;return{userDetails:a||{}}}))((function(e){var a=e.userDetails,t=Xe(),n=a.handle,c=a.location,o=a.bio,l=a.website,i=a.imageUrl,m=a.createdAt;return r.a.createElement(de.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:i,alt:"profile",className:"profile-image"})),r.a.createElement("div",{className:"profile-details"},r.a.createElement(pe.a,{component:E.b,to:"/users/".concat(n),color:"primary",variant:"h6"},"@",n),o&&r.a.createElement(Q.a,{variant:"body1"},o),r.a.createElement("hr",null),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{color:"primary"}),r.a.createElement("span",{color:"primary"},c),r.a.createElement("hr",null)),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{color:"primary"}),r.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},l),r.a.createElement("hr",null)),r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{color:"primary"})," ",r.a.createElement("span",{variant:"body1"},"Joined ",ae()(m).format("MMM, YYYY"))))))})),qe=Object(O.a)({screamsContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},noScreamsContainer:{margin:"50px auto"},screamList:{width:"100%"},typography:{margin:"20px 0 0"},loginMessage:{width:"100%",height:"100%",textAlign:"center",marginTop:"20%"}}),Qe=Object(l.b)((function(e){return{screams:e.data.userData.screams||[],loading:e.data.loading,authenticated:e.user.authenticated}}),{getUserProfile:function(e){return function(a){a({type:"LOADING_DATA"}),u.a.get("/user/".concat(e)).then((function(e){a({type:"SET_USER_DATA",payload:e.data})})).catch((function(){a({type:"SET_USER_DATA",payload:[]})}))}}})((function(e){var a=e.getUserProfile,t=e.screams,c=e.loading,o=e.authenticated,l=Object(Ne.a)(e,["getUserProfile","screams","loading","authenticated"]),i=qe(),m=l.match.params.handle,s=l.match.params.screamId||null;return Object(n.useEffect)((function(){a(m)}),[]),console.log(c,o),o?c?"Loading Profile...":r.a.createElement(ce.a,{container:!0,spacing:2},r.a.createElement(ce.a,{item:!0,xs:12,lg:7},r.a.createElement("div",{className:i.screamsContainer},t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{color:"primary",className:i.typography},"All ",m," Screams"),r.a.createElement(Q.a,{color:"primary",className:i.typography},t.length," ",1===t.length?"scream":"screams")):r.a.createElement(Q.a,{className:i.noScreamsContainer},"No screams by this user"),r.a.createElement("ul",{className:i.screamList},t.map((function(e){return e.screamId!==s?r.a.createElement(We,{key:e.screamId,scream:e}):r.a.createElement(We,{key:e.screamId,scream:e,openDialog:!0})}))))),r.a.createElement(ce.a,{item:!0,xs:12,lg:5},r.a.createElement($e,null))):r.a.createElement(Q.a,{className:i.loginMessage},"Please ",r.a.createElement(E.b,{to:"/login"},"login")," to see this user profile and activity")})),Ze=Object(i.a)({palette:{primary:{light:"#039be5",main:"#01579b",dark:"#b22a00",contrastText:"#fff"},secondary:{main:"#f50057",contrastText:"#fff"}},spread:{typography:{userNextVariants:!0},form:{textAlign:"center"},img:{maxWidth:60,margin:"1.5rem auto 5px"},textField:{margin:20},button:{marginTop:16,display:"flex",justifyContent:"center",alignItems:"center",margin:"auto",width:90,height:50},customError:{color:"#FF0000",fontSize:"0.7rem"},small:{display:"block",marginTop:"1rem"},circularProgress:{color:"#fff",position:"absolute"},paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}}}}),ea=localStorage.FBIdToken;ea&&(1e3*p()(ea).exp<Date.now()?(H.dispatch({type:"SET_AUTHENTICATED"}),u.a.defaults.headers.common.Authorization=ea,H.dispatch(v())):(H.dispatch(S()),window.location.href="/login"));var aa=function(){return r.a.createElement(m.a,{theme:Ze},r.a.createElement(E.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(re,null),r.a.createElement("div",{className:"container"},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",component:Be}),r.a.createElement(Je,{exact:!0,path:"/signup",component:Ve}),r.a.createElement(Je,{exact:!0,path:"/login",component:Ke}),r.a.createElement(f.b,{exact:!0,path:"/users/:handle",component:Qe}),r.a.createElement(f.b,{exact:!0,path:"/users/:handle/scream/:screamId",component:Qe}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:H},r.a.createElement(aa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,a,t){e.exports=t.p+"static/media/icon.bb5d4fa1.png"}},[[131,1,2]]]);
//# sourceMappingURL=main.310ff7bb.chunk.js.map